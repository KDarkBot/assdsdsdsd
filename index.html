<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>사진 게시판</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
  <!-- 애니메이션을 위한 CSS -->
  <style>
    @keyframes slideDown {
      from { transform: translateY(-10px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes scaleIn {
      from { transform: scale(0.95); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .animate-slide-down {
      animation: slideDown 0.3s ease-out;
    }

    .animate-fade-in {
      animation: fadeIn 0.3s ease-out;
    }

    .animate-scale-in {
      animation: scaleIn 0.3s ease-out;
    }

    .modal {
      transition: all 0.3s ease-in-out;
    }

    .modal-content {
      transition: transform 0.3s ease-in-out;
    }

    .modal.show .modal-content {
      transform: scale(1);
    }

    .modal.hide .modal-content {
      transform: scale(0.95);
    }

    /* 호버 효과 */
    .hover-scale {
      transition: transform 0.2s ease-in-out;
    }

    .hover-scale:hover {
      transform: scale(1.02);
    }

    /* 반짝이는 효과 */
    .shine {
      position: relative;
      overflow: hidden;
    }

    .shine::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(
        45deg,
        rgba(255,255,255,0) 0%,
        rgba(255,255,255,0.1) 50%,
        rgba(255,255,255,0) 100%
      );
      transform: rotate(45deg);
      animation: shine 3s infinite;
    }

    @keyframes shine {
      0% { transform: translateX(-100%) rotate(45deg); }
      100% { transform: translateX(100%) rotate(45deg); }
    }
  </style>
</head>
<body class="bg-gradient-to-br from-indigo-50 via-white to-pink-50 text-gray-800 font-sans min-h-screen">
  <!-- 현대적인 헤더 -->
  <header class="bg-white/80 backdrop-blur-md shadow-lg sticky top-0 z-10">
    <div class="container mx-auto px-4 py-3 md:py-4">
      <div class="flex flex-col md:flex-row md:justify-between md:items-center gap-3">
        <h1 class="text-xl md:text-2xl font-extrabold bg-gradient-to-r from-indigo-600 to-pink-500 bg-clip-text text-transparent tracking-wide shine">
          사진 게시판
        </h1>
        <nav>
          <ul class="flex flex-wrap gap-2 md:gap-4">
            <li>
              <button id="edit-user-button" class="px-4 py-2 text-sm bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-full hidden hover-scale shadow-md transition-all duration-300">
                회원정보
              </button>
            </li>
            <li>
              <button id="login-button" class="px-4 py-2 text-sm bg-gradient-to-r from-indigo-500 to-indigo-600 text-white rounded-full hover-scale shadow-md transition-all duration-300">
                로그인
              </button>
            </li>
            <li>
              <button id="signup-button" class="px-4 py-2 text-sm bg-gradient-to-r from-green-500 to-green-600 text-white rounded-full hover-scale shadow-md transition-all duration-300">
                회원가입
              </button>
            </li>
            <li>
              <button id="logout-button" class="px-4 py-2 text-sm bg-gradient-to-r from-red-500 to-red-600 text-white rounded-full hover-scale shadow-md transition-all duration-300 hidden">
                로그아웃
              </button>
            </li>
            <li>
              <button id="ranking-button" class="px-4 py-2 text-sm bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-full hover-scale shadow-md transition-all duration-300">
                랭킹
              </button>
            </li>
            <li>
              <button id="open-give-points" class="px-4 py-2 text-sm bg-gradient-to-r from-yellow-500 to-yellow-600 text-white rounded-full hover-scale shadow-md transition-all duration-300 hidden">
                포인트
              </button>
            </li>
          <!-- 상점 버튼 (새로 추가) -->
          <li><button id="shop-button" class="px-4 py-2 text-sm bg-gradient-to-r from-yellow-500 to-yellow-600 text-white rounded-full hover-scale shadow-md transition-all duration-300 hidden">
            상점
          </button></li>
          </ul>
        </nav>
      </div>
    </div>
  </header>

  <!-- 메인 섹션 -->
  <main class="container mx-auto py-8 px-4 animate-fade-in">
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-2xl font-bold text-gray-700">자유게시판</h2>
      <button id="new-post" class="group px-6 py-3 text-sm bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-full hover-scale shadow-lg transition-all duration-300 flex items-center gap-2">
        <span>새 글 작성</span>
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 transition-transform duration-300 group-hover:translate-x-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
        </svg>
      </button>
    </div>

    <!-- 테이블 섹션 -->
    <div class="overflow-hidden bg-white/50 backdrop-blur-md shadow-xl rounded-2xl animate-scale-in">
      <table class="w-full text-left">
        <thead class="bg-gradient-to-r from-gray-50 to-gray-100 text-gray-600 text-sm font-semibold uppercase tracking-wide">
          <tr>
            <th class="py-4 px-6 border-b border-gray-200 hidden md:table-cell">NO</th>
            <th class="py-4 px-6 border-b border-gray-200">제목</th>
            <th class="py-4 px-6 border-b border-gray-200">작성자</th>
            <th class="py-4 px-6 border-b border-gray-200 hidden md:table-cell">작성시간</th>
            <th class="py-4 px-6 border-b border-gray-200">좋아요</th>
            <th class="py-4 px-6 border-b border-gray-200">보기</th>
          </tr>
        </thead>
        <tbody id="post-list" class="divide-y divide-gray-100 text-gray-700 text-sm">
          <!-- JS에서 동적 생성 -->
        </tbody>
      </table>
    </div>
  </main>

  <!-- 모달 템플릿 (로그인 모달 예시) -->
  <div id="login-modal" class="modal fixed inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm hidden">
    <div class="modal-content bg-white rounded-2xl shadow-2xl p-6 max-w-sm w-full mx-4 transform scale-95">
      <h3 class="text-xl font-bold mb-6 text-gray-700 flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-indigo-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1" />
        </svg>
        로그인
      </h3>
      <input 
        type="email" 
        id="login-email" 
        class="w-full p-3 border border-gray-200 rounded-xl mb-4 focus:ring-2 focus:ring-indigo-200 focus:border-indigo-400 transition-all duration-300" 
        placeholder="이메일"
      >
      <input 
        type="password" 
        id="login-password" 
        class="w-full p-3 border border-gray-200 rounded-xl mb-6 focus:ring-2 focus:ring-indigo-200 focus:border-indigo-400 transition-all duration-300" 
        placeholder="비밀번호"
      >
      <div class="flex justify-end gap-2">
        <button id="login-submit" class="px-6 py-2 bg-gradient-to-r from-indigo-500 to-indigo-600 text-white rounded-xl hover-scale shadow-md transition-all duration-300">
          로그인
        </button>
        <button id="close-login-modal" class="px-6 py-2 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-all duration-300">
          닫기
        </button>
      </div>
    </div>
  </div>
 <!-- 회원 정보 수정 모달 -->
 <div id="edit-user-modal" class="modal fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden p-4">
  <div class="bg-white rounded-xl shadow-lg p-4 md:p-6 max-w-sm w-full relative">
    <h3 class="text-lg font-bold mb-4 text-gray-700">회원 정보 수정</h3>
    <input
      type="text"
      id="edit-username"
      class="w-full p-2 md:p-3 text-sm md:text-base border rounded-lg mb-4 focus:ring focus:ring-indigo-200"
      placeholder="새 이름"
    >
    <div class="flex justify-end gap-2">
      <button id="save-user-info" class="px-3 md:px-4 py-1.5 md:py-2 text-sm md:text-base bg-indigo-600 text-white rounded-lg">저장</button>
      <button id="close-edit-user-modal" class="px-3 md:px-4 py-1.5 md:py-2 text-sm md:text-base bg-gray-300 text-gray-800 rounded-lg">취소</button>
    </div>
  </div>
</div>
 <!-- 게시물 보기 모달 -->
 <div
 id="view-modal"
 class="modal fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden"
>
 <div
   class="bg-white rounded-xl shadow-lg p-6 md:p-8 w-full max-w-4xl relative
          max-h-[80vh] overflow-auto"
 >
   <button
     id="close-view-modal"
     class="absolute top-4 right-4 px-4 py-2 bg-gray-300 text-gray-800 font-medium rounded-lg hover:bg-gray-400"
   >
     닫기
   </button>

   <h3
     id="view-title"
     class="text-xl md:text-2xl font-semibold mb-4 text-center text-gray-700"
   ></h3>

   <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
     <!-- 왼쪽: 이미지 섹션 -->
     <div
       id="view-image"
       class="bg-gray-100 rounded-lg flex items-center justify-center h-72 shadow-md"
     >
       <span class="text-gray-400">이미지가 없습니다</span>
     </div>

     <!-- 오른쪽: 게시물 정보, 좋아요, 별점 -->
     <div>
       <p class="text-gray-600 mb-1">
         <strong>작성자:</strong>
         <span id="view-author"></span>
       </p>
       <p class="text-gray-600 mb-4">
         <strong>작성시간:</strong>
         <span id="view-timestamp"></span>
       </p>
       <p class="text-gray-600">
         <strong>내용:</strong>
       </p>
       <p
         id="view-content"
         class="mt-1 text-gray-700 mb-4"
       ></p>

       <!-- 관리자 별점 섹션 -->
       <div class="mb-4">
         <p class="text-gray-600">
           <strong>관리자 별점:</strong>
           <span id="view-rating" class="text-yellow-500">없음</span>
         </p>
         <div
           id="rating-section"
           class="mt-2 flex gap-2 hidden"
         >
           <button class="rate bg-yellow-400 text-white px-3 py-1 rounded-lg hover:bg-yellow-500" data-rating="1">1점</button>
           <button class="rate bg-yellow-400 text-white px-3 py-1 rounded-lg hover:bg-yellow-500" data-rating="2">2점</button>
           <button class="rate bg-yellow-400 text-white px-3 py-1 rounded-lg hover:bg-yellow-500" data-rating="3">3점</button>
           <button class="rate bg-yellow-400 text-white px-3 py-1 rounded-lg hover:bg-yellow-500" data-rating="4">4점</button>
           <button class="rate bg-yellow-400 text-white px-3 py-1 rounded-lg hover:bg-yellow-500" data-rating="5">5점</button>
         </div>
       </div>

       <!-- 좋아요 버튼 -->
       <button
         id="like-post"
         class="like-button bg-pink-500 text-white px-4 py-2 rounded-lg hover:bg-pink-600"
       >
         ❤️ 좋아요
       </button>
     </div>
   </div>

   <!-- 댓글 섹션 -->
   <div class="mt-6">
     <h4 class="text-lg md:text-xl font-semibold text-gray-700 mb-2">
       댓글
     </h4>
     <div
       id="comment-list"
       class="space-y-2 mb-4 border-t pt-4 max-h-60 overflow-y-auto"
     >
       <!-- 댓글이 동적으로 추가됨 -->
     </div>
     <div class="flex flex-col md:flex-row gap-2">
       <textarea
         id="comment-input"
         class="flex-1 p-2 border rounded"
         rows="2"
         placeholder="댓글을 입력하세요"
       ></textarea>
       <button
         id="add-comment"
         class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 md:self-end"
       >
         댓글 달기
       </button>
     </div>
   </div>
 </div>
</div>
 <!-- 새 글 작성 모달 -->
 <div id="post-modal" class="modal fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden p-4">
    <div class="bg-white rounded-xl shadow-lg p-4 md:p-6 max-w-lg w-full relative">
      <h3 class="text-lg md:text-xl font-bold mb-4 text-gray-700">새 글 작성</h3>
      <input
        type="text"
        id="post-title"
        class="w-full p-2 md:p-3 text-sm md:text-base border rounded-lg mb-4 focus:ring focus:ring-indigo-200"
        placeholder="제목을 입력하세요"
        required
      >
      <textarea
        id="post-content"
        class="w-full p-2 md:p-3 text-sm md:text-base border rounded-lg mb-4 focus:ring focus:ring-indigo-200 min-h-[100px]"
        placeholder="내용을 입력하세요"
        required
      ></textarea>
      <input
        type="file"
        id="post-file"
        class="w-full p-2 md:p-3 text-sm md:text-base border rounded-lg mb-4 focus:ring focus:ring-indigo-200"
        accept="image/*"
      >
      <div class="flex justify-end gap-2">
        <button id="save-post" class="px-3 md:px-4 py-1.5 md:py-2 text-sm md:text-base bg-green-500 text-white font-medium rounded-lg hover:bg-green-600">
          저장
        </button>
        <button id="close-post-modal" class="px-3 md:px-4 py-1.5 md:py-2 text-sm md:text-base bg-gray-300 text-gray-800 font-medium rounded-lg hover:bg-gray-400">
          닫기
        </button>
      </div>
    </div>
  </div>
   <!-- 상점 모달 -->
   <div id="shop-modal" class="modal fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden">
    <div class="bg-white rounded-lg shadow-lg p-6 max-w-md w-full relative">
      <h3 class="text-lg font-bold mb-4 text-gray-700">상점</h3>
      <!-- 닫기 버튼 -->
      <button id="close-shop-modal" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800">
        X
      </button>

      <!-- 상점 아이템 목록 -->
      <div class="space-y-3">
        <!-- 아이템: 게시물 하나 지우기 -->
        <div class="p-3 border rounded flex justify-between items-center">
          <div>
            <p class="font-semibold">게시물 하나 지우기</p>
            <p class="text-sm text-gray-600">포인트로 구매할 수 있습니다.</p>
          </div>
          <button id="buy-delete-post-item" class="bg-yellow-500 text-white px-3 py-1 rounded">
            구매 (50 포인트)
          </button>
        </div>
      </div>
    </div>
  </div>
<!-- 회원가입 모달 -->
<div
 id="signup-modal"
 class="modal fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden"
>
 <div class="bg-white rounded-xl shadow-lg p-6 max-w-sm w-full relative">
   <h3 class="text-xl font-bold mb-4 text-gray-700">회원가입</h3>
   <input
     type="email"
     id="signup-email"
     class="w-full p-3 border rounded-lg mb-4 focus:ring focus:ring-green-200"
     placeholder="이메일" required
   >
   <input
     type="password"
     id="signup-password"
     class="w-full p-3 border rounded-lg mb-4 focus:ring focus:ring-green-200"
     placeholder="비밀번호" required
   >
   <input
     type="text"
     id="signup-name"
     class="w-full p-3 border rounded-lg mb-4 focus:ring focus:ring-green-200"
     placeholder="이름" required
   >
   <div class="flex justify-end gap-2">
     <button
       id="signup-submit"
       class="px-4 py-2 bg-green-500 text-white font-medium rounded-lg hover:bg-green-600"
     >
       회원가입
     </button>
     <button
       id="close-signup-modal"
       class="px-4 py-2 bg-gray-300 text-gray-800 font-medium rounded-lg hover:bg-gray-400"
     >
       닫기
     </button>
   </div>
 </div>
</div>
<!-- 포인트 지급 모달 -->
<div id="give-points-modal" class="modal fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden p-4">
  <div class="bg-white rounded-lg shadow-lg p-4 md:p-6 max-w-md w-full relative">
    <h3 class="text-lg font-bold mb-4 text-gray-700">포인트 지급</h3>
    <button id="close-give-points-modal" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800">
      X
    </button>
    <div id="user-list" class="space-y-2 max-h-96 overflow-y-auto">
      <!-- scripts.js에서 loadAllUsers()로 유저 목록 동적 생성 -->
    </div>
  </div>
</div>
  <script>
    // 모달 애니메이션 처리
    document.querySelectorAll('.modal').forEach(modal => {
      const content = modal.querySelector('.modal-content');
      
      // 모달 표시
      const showModal = () => {
        modal.classList.remove('hidden');
        setTimeout(() => {
          modal.classList.add('show');
          content.style.transform = 'scale(1)';
        }, 10);
      };
      
      // 모달 숨기기
      const hideModal = () => {
        modal.classList.remove('show');
        content.style.transform = 'scale(0.95)';
        setTimeout(() => {
          modal.classList.add('hidden');
        }, 300);
      };
      
      // 기존 모달 오픈/클로즈 함수를 수정하여 애니메이션 적용
      // (실제 구현 시 각 모달의 오픈/클로즈 버튼에 이벤트 연결)
    });
  </script>

  <script src="scripts.js" defer></script>
</body>
</html>
